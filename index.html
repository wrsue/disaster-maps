<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>é™¸ä¸Šå¼·é¢¨ç‰¹å ±(é»ƒè‰²ç‡ˆè™Ÿ) | ç½å®³è­¦æˆ’åœ°åœ–</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Noto Sans TC','å¾®è»Ÿæ­£é»‘é«”',sans-serif;background:#1a1a2e;color:#eee}
    #header{background:linear-gradient(135deg,#16213e,#0f3460);padding:12px 18px;border-bottom:3px solid #FFFF00;display:flex;align-items:center;gap:12px}
    .h-icon{font-size:2rem}
    #header h1{font-size:1.15rem;margin-bottom:3px}
    #header .sub{font-size:0.75rem;color:#aac4e0;line-height:1.5}
    #map{width:100%;height:calc(100vh - 120px)}
    #legend{position:absolute;bottom:28px;right:10px;z-index:1000;background:rgba(22,33,62,.92);border:1px solid #444;border-radius:8px;padding:12px 16px;min-width:210px;box-shadow:0 4px 12px rgba(0,0,0,.5)}
    #legend h4{font-size:.82rem;margin-bottom:7px;color:#aac4e0;letter-spacing:1px}
    .li{display:flex;align-items:center;gap:8px;margin:4px 0;font-size:.8rem}
    .lc{width:15px;height:15px;border-radius:3px;flex-shrink:0}
    #footer{background:#16213e;border-top:1px solid #333;padding:5px 18px;font-size:.72rem;color:#889;display:flex;justify-content:space-between}
    .pt{font-weight:bold;font-size:.95rem;margin-bottom:3px}
    .ps{padding:2px 8px;border-radius:4px;font-size:.78rem;display:inline-block;margin-bottom:5px}
    .pw{background:#FFFF00;color:#fff}
    .pc{background:#4CAF50;color:#fff}
    .pi{font-size:.75rem;color:#555;margin-top:4px}
    .ta{font-size:.72rem;color:#888;margin-top:6px;border-top:1px solid #eee;padding-top:5px;max-height:80px;overflow-y:auto}
  </style>
</head>
<body>
<div id="header">
  <div class="h-icon">ğŸŒ¬ï¸</div>
  <div>
    <h1>é™¸ä¸Šå¼·é¢¨ç‰¹å ±(é»ƒè‰²ç‡ˆè™Ÿ)</h1>
    <div class="sub">
      ç”Ÿæ•ˆï¼š2026-02-18 10:28 ï½ 2026-02-19 16:00ï¼ˆTPEï¼‰ï½œå½±éŸ¿ï¼š13 ç¸£å¸‚ ï¼ˆç²¾ç¢ºé„‰é®ï¼š52 å€‹ï¼Œç¸£å¸‚å±¤ç´šé¡¯ç¤ºï¼‰ï½œğŸ”´ ç”Ÿæ•ˆä¸­<br/>
      è³‡æ–™ä¾†æºï¼šCWA CAP | ç™¼å¸ƒï¼š2026-02-18 10:29
    </div>
  </div>
</div>
<div id="map"></div>
<div id="legend">
  <h4>ğŸ“Š åœ–ä¾‹</h4>
  <div class="li"><div class="lc" style="background:#FFFF00;opacity:.8"></div>é™¸ä¸Šå¼·é¢¨ç‰¹å ±(é»ƒè‰²ç‡ˆè™Ÿ)ï¼ˆ13ç¸£å¸‚ï¼‰</div>
  <div class="li"><div class="lc" style="background:#4CAF50;opacity:.55"></div>ç„¡ç‰¹å ±</div>
  <hr style="border-color:#333;margin:7px 0"/>
  <div style="font-size:.72rem;color:#889">é»æ“Šç¸£å¸‚æŸ¥çœ‹è©³æƒ…</div>
</div>
<div id="footer">
  <span>âš™ï¸ è³‡æ–™ï¼šCWA CAP | ç¹ªè£½ï¼šOpenClaw AI</span>
  <span>ğŸ“… 2026-02-18 10:29 TPE</span>
</div>
<script>
const WARNING_COUNTIES = new Set(["å˜‰ç¾©ç¸£", "å±æ±ç¸£", "å½°åŒ–ç¸£", "æ–°åŒ—å¸‚", "æ–°ç«¹å¸‚", "æ–°ç«¹ç¸£", "æ¡ƒåœ’å¸‚", "æ¾æ¹–ç¸£", "è‡ºä¸­å¸‚", "è‡ºå—å¸‚", "è‡ºæ±ç¸£", "è‹—æ —ç¸£", "é›²æ—ç¸£"]);
const RAW_AREAS = ["æ–°åŒ—å¸‚ä¸‰èŠå€", "æ–°åŒ—å¸‚æ·¡æ°´å€", "æ¡ƒåœ’å¸‚è§€éŸ³å€", "æ¡ƒåœ’å¸‚æ–°å±‹å€", "æ¡ƒåœ’å¸‚è˜†ç«¹å€", "æ–°ç«¹å¸‚åŒ—å€", "æ–°ç«¹å¸‚é¦™å±±å€", "æ–°ç«¹ç¸£æ–°è±é„‰", "æ–°ç«¹ç¸£ç«¹åŒ—å¸‚", "è‹—æ —ç¸£è‹‘è£¡é®", "è‹—æ —ç¸£é€šéœ„é®", "è‹—æ —ç¸£å¾Œé¾é®", "è‹—æ —ç¸£è¥¿æ¹–é„‰", "è‡ºä¸­å¸‚æ¸…æ°´å€", "è‡ºä¸­å¸‚å¤§ç”²å€", "è‡ºä¸­å¸‚å¤–åŸ”å€", "è‡ºä¸­å¸‚å¤§å®‰å€", "è‡ºä¸­å¸‚é¾äº•å€", "è‡ºä¸­å¸‚æ¢§æ£²å€", "å½°åŒ–ç¸£ç¦èˆˆé„‰", "å½°åŒ–ç¸£ç·šè¥¿é„‰", "å½°åŒ–ç¸£é¹¿æ¸¯é®", "å½°åŒ–ç¸£ä¼¸æ¸¯é„‰", "å½°åŒ–ç¸£èŠ³è‹‘é„‰", "å½°åŒ–ç¸£äºŒæ—é®", "å½°åŒ–ç¸£å¤§åŸé„‰", "é›²æ—ç¸£æ±å‹¢é„‰", "é›²æ—ç¸£è‡ºè¥¿é„‰", "é›²æ—ç¸£éº¥å¯®é„‰", "é›²æ—ç¸£å››æ¹–é„‰", "é›²æ—ç¸£æ°´æ—é„‰", "é›²æ—ç¸£å£æ¹–é„‰", "å˜‰ç¾©ç¸£æ±çŸ³é„‰", "å˜‰ç¾©ç¸£å…­è…³é„‰", "è‡ºå—å¸‚åŒ—é–€å€", "è‡ºå—å¸‚ä¸ƒè‚¡å€", "è‡ºå—å¸‚å°‡è»å€", "è‡ºå—å¸‚å®‰å—å€", "å±æ±ç¸£æ†æ˜¥é®", "å±æ±ç¸£æ»¿å·é„‰", "å±æ±ç¸£è»ŠåŸé„‰", "å±æ±ç¸£ç‰¡ä¸¹é„‰", "è‡ºæ±ç¸£ç¶ å³¶é„‰", "è‡ºæ±ç¸£è˜­å¶¼é„‰", "è‡ºæ±ç¸£å‘å—é„‰", "è‡ºæ±ç¸£æˆåŠŸé®", "æ¾æ¹–ç¸£æœ›å®‰é„‰", "æ¾æ¹–ç¸£æ¹–è¥¿é„‰", "æ¾æ¹–ç¸£ç™½æ²™é„‰", "æ¾æ¹–ç¸£ä¸ƒç¾é„‰"];
const IS_TOWNSHIP = true;
const MAP_COLOR = "#FFFF00";
const HEADLINE = "é™¸ä¸Šå¼·é¢¨ç‰¹å ±(é»ƒè‰²ç‡ˆè™Ÿ)";
const EFFECTIVE = "2026-02-18 10:28";
const EXPIRES = "2026-02-19 16:00";
const DESCRIPTION = "æ±åŒ—é¢¨åå¼·ï¼Œ18æ—¥ä¸Šåˆè‡³19æ—¥ä¸‹åˆæ–°åŒ—å¸‚ã€æ¡ƒåœ’å¸‚ã€æ–°ç«¹å¸‚ã€æ–°ç«¹ç¸£ã€è‹—æ —ç¸£ã€è‡ºä¸­å¸‚ã€å½°åŒ–ç¸£ã€é›²æ—ç¸£ã€å˜‰ç¾©ç¸£ã€è‡ºå—å¸‚ã€å±æ±ç¸£ã€è‡ºæ±ç¸£(å«è˜­å¶¼ã€ç¶ å³¶)ã€æ¾æ¹–ç¸£å±€éƒ¨åœ°å€æœ‰å¹³å‡é¢¨6ç´šä»¥ä¸Šæˆ–é™£é¢¨8ç´šä»¥ä¸Šç™¼ç”Ÿçš„æ©Ÿç‡(é»ƒè‰²ç‡ˆè™Ÿ)ï¼Œè«‹æ³¨æ„ã€‚";
const WEB_URL = "https://www.cwa.gov.tw/V8/C/P/Warning/W25.html";

const NORMALIZE = {"å°æ±ç¸£":"è‡ºæ±ç¸£","å°å—å¸‚":"è‡ºå—å¸‚","å°ä¸­å¸‚":"è‡ºä¸­å¸‚","å°åŒ—å¸‚":"è‡ºåŒ—å¸‚","æ¡ƒåœ’ç¸£":"æ¡ƒåœ’å¸‚"};
function norm(n){return NORMALIZE[n]||n;}
function isWarn(n){return WARNING_COUNTIES.has(norm(n))||WARNING_COUNTIES.has(n);}

const map = L.map('map',{center:[23.5,121.0],zoom:7});
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{
  attribution:'Â© OpenStreetMap contributors Â© CARTO',subdomains:'abcd',maxZoom:19
}).addTo(map);

function style(f){
  const w=isWarn(f.properties.COUNTYNAME||f.properties.name||'');
  return {fillColor:w?MAP_COLOR:'#4CAF50',weight:1.2,opacity:1,color:'#fff',fillOpacity:w?.72:.45};
}

let gl;
function onEach(f,layer){
  const raw=f.properties.COUNTYNAME||f.properties.name||'';
  const nm=norm(raw);
  const w=isWarn(raw);
  // é„‰é®æ¸…å–®ï¼ˆè‹¥æœ‰ï¼‰
  const towns=IS_TOWNSHIP&&w?RAW_AREAS.filter(a=>a.startsWith(nm.replace('è‡º','å°'))||a.startsWith(nm)):[];
  const townHtml=towns.length>0?`<div class="ta"><b>è­¦æˆ’é„‰é®ï¼š</b><br/>`+towns.join('ã€')+'</div>':'';
  const pop=`<div class="pt">${nm}</div>
    <span class="ps ${w?'pw':'pc'}">${w?'âš ï¸ '+HEADLINE:'âœ… ç„¡ç‰¹å ±'}</span>
    ${w?`<div class="pi">â° ${EFFECTIVE} ï½ ${EXPIRES}</div>`+townHtml:''}
    ${WEB_URL&&w?`<div style="margin-top:6px"><a href="${WEB_URL}" target="_blank" style="color:#64b5f6;font-size:.75rem">ğŸ“ å®˜æ–¹é€£çµ</a></div>`:''}`;
  layer.bindPopup(pop,{maxWidth:260});
  layer.on({
    mouseover:e=>e.target.setStyle({weight:2.5,color:'#FFD700',fillOpacity:.9}),
    mouseout:e=>gl.resetStyle(e.target),
    click:e=>map.fitBounds(e.target.getBounds(),{padding:[30,30]})
  });
}

fetch('https://raw.githubusercontent.com/g0v/twgeojson/master/json/twCounty2010.geo.json')
  .then(r=>r.json())
  .then(data=>{
    gl=L.geoJSON(data,{style:style,onEachFeature:onEach}).addTo(map);
  })
  .catch(e=>console.error('GeoJSON error:',e));
</script>
</body>
</html>